<!DOCTYPE html>
<head>
    <title>Local Storage with JSON</title>
    <style type="text/css" >
        body{
            height: 100vh;

            display: flex;
            justify-content: center;
            align-items: center;

        }

        .container{
            width: 300px;
            background-color: #f4f4f4;
            padding: 10px;
        }

    </style>
</head>
<body>

    <div class="container" >
        <h4>Choose Your Fav Colors</h4>

        <div  class="colorbox" >
            <ul class="list-group" >

            </ul>
        </div>

    </div>

<script type="text/javascript" >

    const getul = document.querySelector('.list-group');

    var datas = `{"colors":
            {"red color":true,
            "Blue Color":false,
            "Green Color":false,
            "White Color":false,
            "Green Color":false,
            "Black Color":true,
            "Green Color":false,
            "Pink Color":true,
            "Violet Color":false
            }
        }`

    var dataobjs = JSON.parse(datas);
    // console.log(dataobjs);
    let x = 0;
    for(let key in dataobjs.colors){
        // var status = dataobjs.colors[key] ? 'checked' '' ;
        var status = !dataobjs.colors[key] ? '' : 'checked';
        x++;
        var lis = `<li><input type="checkbox" id="${x}" value="" class="swtich" ${status} /><label for="${x}" >${key}</label></li>`;
        getul.innerHTML += lis;
    }

    // let getswitchs = document.querySelectorAll(".swtich");
    //
    // getswitchs.forEach((getswitch)=>{
    //     getswitch.addEventListener("change",(e)=>{
    //         let key = e.target.nextElementSibling.textContent;
    //         if(e.target.checked === true){
    //             dataobjs["colors"][key] = true;
    //         }else{
    //             dataobjs["colors"][key] = false;
    //         }
    //         console.log(dataobjs);
    //     });
    // });

    clickeven();

    function clickeven(){
        var getcheckkeds = document.querySelectorAll(".list-group input[type='checkbox']");

        for(var idx in getcheckkeds){
            console.log(idx);
            getcheckkeds[idx].onchange = updatedata;
        }
    }

    function updatedata(e){
        var getinputval = this.value;
        var getinputstatus = this.checked;

        // dataobjs.colors.getinputval = getinputstatus; // not working cuz it's variable

        dataobjs.colors[getinputval] = getinputstatus; // it's Ok now
        console.log(dataobjs);
    }


</script>
</body>
</html>
